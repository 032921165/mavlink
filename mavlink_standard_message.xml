<?xml version="1.0"?>
<messages>
 
   <message name="HEARTBEAT" id="0">
     <field name="type" type="uint8_t">Type of the MAV (quadrotor, helicopter, etc.)</field>
   </message>
 
   <message name="BOOT" id="1">
     <field name="version" type="uint32_t">The onboard software version</field>
   </message>

   <message name="SYSTEM_TIME" id="2">
     <field name="time_usec" type="uint64_t">Timestamp of the master clock in microseconds since UNIX epoch.</field>
   </message>

   <message name="ACTION" id="20">
     <field name="target" type="uint8_t">The system executing the action</field>
     <field name="action" type="uint8_t">The action id</field>
   </message>

   <message name="SET_MODE" id="21">
     <field name="target" type="uint8_t">The system setting the mode</field>
     <field name="mode" type="uint8_t">The new mode</field>
   </message>

   <message name="SET_ALTITUDE" id="22">
     <field name="target" type="uint8_t">The system setting the altitude</field>
     <field name="mode" type="uint32_t">The new altitude in meters</field>
   </message>

  <message name="REQUEST_DATA_STREAM" id="23">
     <field name="target_system" type="uint8_t">The target requested to send the message stream.</field>
     <field name="target_component" type="uint8_t">The target requested to send the message stream.</field>
     <field name="req_stream_id" type="uint8_t">The ID of the requested stream</field>
     <field name="req_message_rate" type="uint16_t">The requested interval between two messages of this type</field>
     <field name="start_stop" type="uint8_t">1 to start sending, 0 to stop sending.</field>
   </message>

   <message name="REQUEST_DYNAMIC_GYRO_CALIBRATION" id="24">
     <field name="target_system" type="uint8_t">The system which should auto-calibrate</field>
<field name="target_component" type="uint8_t">The system component which should auto-calibrate</field>
     <field name="mode" type="float">The current ground-truth rpm</field>
     <field name="axis" type="uint8_t">The axis to calibrate: 0 roll, 1 pitch, 2 yaw</field>
      <field name="time" type="uint16_t">The time to average over in ms</field>
   </message>

   <message name="REQUEST_STATIC_CALIBRATION" id="25">
     <field name="target_system" type="uint8_t">The system which should auto-calibrate</field>
<field name="target_component" type="uint8_t">The system component which should auto-calibrate</field>
      <field name="time" type="uint16_t">The time to average over in ms</field>
   </message>

   <message name="MANUAL_CONTROL" id="50">
     <field name="target" type="uint8_t">The system to be controlled</field>
     <field name="roll" type="float">roll</field>
     <field name="pitch" type="float">pitch</field>
     <field name="yaw" type="float">yaw</field>
     <field name="thrust" type="float">thrust</field>
     <field name="roll_manual" type="uint8_t">roll control enabled auto:0, manual:1</field>
     <field name="pitch_manual" type="uint8_t">pitch auto:0, manual:1</field>
     <field name="yaw_manual" type="uint8_t">yaw auto:0, manual:1</field>
     <field name="thrust_manual" type="uint8_t">thrust auto:0, manual:1</field>
   </message>

  <message name="ATTITUDE_CONTROL" id="51">
     <field name="target" type="uint8_t">The system to be controlled</field>
     <field name="roll" type="float">roll</field>
     <field name="pitch" type="float">pitch</field>
     <field name="yaw" type="float">yaw</field>
     <field name="thrust" type="float">thrust</field>
     <field name="roll_manual" type="uint8_t">roll control enabled auto:0, manual:1</field>
     <field name="pitch_manual" type="uint8_t">pitch auto:0, manual:1</field>
     <field name="yaw_manual" type="uint8_t">yaw auto:0, manual:1</field>
     <field name="thrust_manual" type="uint8_t">thrust auto:0, manual:1</field>
   </message>


 <message name="SET_CAM_SHUTTER" id="70">
     <field name="cam_no" type="uint8_t">Camera id</field>
     <field name="cam_mode" type="uint8_t">Camera mode: 0 = auto, 1 = manual</field>
     <field name="trigger_pin" type="uint8_t">Trigger pin, 0-3 for PtGrey FireFly</field>
     <field name="interval" type="uint16_t">Shutter interval, in microseconds</field>
     <field name="exposure" type="uint16_t">Exposure time, in microseconds</field>
     <field name="gain" type="float">Camera gain</field>
   </message>

   <message name="IMAGE_TRIGGERED" id="71">
     <field name="timestamp" type="uint64_t">Timestamp</field>
   </message>

   <message name="IMAGE_TRIGGER_CONTROL" id="72">
     <field name="enable" type="uint8_t">0 to disable, 1 to enable</field>
   </message>

   <message name="IMAGE_AVAILABLE" id="73">
     <field name="cam_id" type="uint64_t">Camera id</field>
     <field name="cam_no" type="uint8_t">Camera # (starts with 0)</field>
     <field name="timestamp" type="uint64_t">Timestamp</field>
     <field name="valid_until" type="uint64_t">Until which timestamp this buffer will stay valid</field>
     <field name="img_seq" type="uint32_t">The image sequence number</field>
     <field name="img_buf_index" type="uint32_t">Position of the image in the buffer, starts with 0</field>
     <field name="width" type="uint16_t">Image width</field>
     <field name="height" type="uint16_t">Image height</field>
     <field name="depth" type="uint16_t">Image depth</field>
     <field name="channels" type="uint8_t">Image channels</field>
     <field name="key" type="int32_t">Shared memory area key</field>
     <field name="exposure" type="uint32_t">Exposure time, in microseconds</field>
     <field name="gain" type="float">Camera gain</field>
   </message>

   <message name="PARAM_REQUEST_READ" id="80">
     <field name="target_system" type="uint8_t">System ID</field>
     <field name="target_component" type="uint8_t">Component ID</field>
     <field name="param_id" type="array[15]">Onboard parameter id</field>
   </message>

   <message name="PARAM_REQUEST_LIST" id="81">
     <field name="target_system" type="uint8_t">System ID</field>
     <field name="target_component" type="uint8_t">Component ID</field>
   </message>

   <message name="PARAM_VALUE" id="82">
     <field name="param_id" type="array[15]">Onboard parameter id</field>
     <field name="param_value" type="float">Onboard parameter value</field>
   </message>

   <message name="PARAM_SET" id="83">
     <field name="target_system" type="uint8_t">System ID</field>
     <field name="target_component" type="uint8_t">Component ID</field>
     <field name="param_id" type="array[15]">Onboard parameter id</field>
     <field name="param_value" type="float">Onboard parameter value</field>
   </message>

   <message name="PARAM_WRITE_STORAGE" id="84">
     <field name="target_system" type="uint8_t">System ID</field>
     <field name="target_component" type="uint8_t">Component ID</field>
   </message>

   <message name="ATTITUDE" id="90">
     <field name="msec"  type="uint64_t">Timestamp (milliseconds)</field>
     <field name="roll"  type="float">Roll angle (rad)</field>
     <field name="pitch" type="float">Pitch angle (rad)</field>
     <field name="yaw"   type="float">Yaw angle (rad)</field>
     <field name="rollspeed"  type="float">Roll angular speed (rad/s)</field>
     <field name="pitchspeed" type="float">Pitch angular speed (rad/s)</field>
     <field name="yawspeed"   type="float">Yaw angular speed (rad/s)</field>
   </message>

   <message name="VISION_POSITION_ESTIMATE" id="91">
     <field name="usec"  type="uint64_t">Timestamp (milliseconds)</field>
     <field name="x"  type="float">Global X Position</field>
     <field name="y" type="float">Global Y Position</field>
     <field name="z"   type="float">Global Z Position</field>
     <field name="roll" type="float">Roll angle in rad</field>
     <field name="pitch" type="float">Pitch angle in rad</field>
     <field name="yaw" type="float">Yaw angle in rad</field>
     <field name="r1"  type="float">World-to-body rotation matrix first column, first row</field>
     <field name="r2" type="float">Rotation matrix second column, first row</field>
     <field name="r3" type="float">Rotation matrix third column, first row</field>
     <field name="r4"  type="float">Rotation matrix first column, second row</field>
     <field name="r5" type="float">Rotation matrix second column, second row</field>
     <field name="r6" type="float">Rotation matrix third column, second row</field>
     <field name="r7"  type="float">Rotation matrix first column, third row</field>
     <field name="r8" type="float">Rotation matrix second column, third row</field>
     <field name="r9" type="float">Rotation matrix third column, third row</field>
     <field name="confidence" type="uint8_t">Confidence about the position. 0 = 0%, 255 = 100%</field>
   </message>

   <message name="POSITION" id="92">
     <field name="usec"  type="uint64_t">Timestamp (milliseconds)</field>
     <field name="x"  type="float">X Position</field>
     <field name="y" type="float">Y Position</field>
     <field name="z"   type="float">Z Position</field>
     <field name="vx"  type="float">X Speed</field>
     <field name="vy" type="float">Y Speed</field>
     <field name="vz"   type="float">Z Speed</field>
   </message>


   <message name="WAYPOINT" id="93">
     <field name="name" type="array[20]">Name of the Waypoint</field>
     <field name="id" type="uint16_t">ID</field>
     <field name="priority" type="uint16_t">Priority</field>
     <field name="x" type="float">x position</field>
     <field name="y" type="float">y position</field>
     <field name="z" type="float">z position</field>
     <field name="yaw" type="float">yaw orientation in radians, 0 = NORTH</field>
     <field name="autocontinue" type="uint16_t">autocontinue to next wp</field>
   </message>

   <message name="WAYPOINT_SET" id="94">
     <field name="target_system" type="uint8_t">System ID</field>
     <field name="target_component" type="uint8_t">Component ID</field>
     <field name="name" type="array[20]">Name of the Waypoint</field>
     <field name="id" type="uint16_t">ID</field>
     <field name="priority" type="uint16_t">Priority</field>
     <field name="x" type="float">x position</field>
     <field name="y" type="float">y position</field>
     <field name="z" type="float">z position</field>
     <field name="yaw" type="float">yaw orientation in radians, 0 = NORTH</field>
     <field name="autocontinue" type="uint16_t">autocontinue to next wp</field>
   </message>

  <message name="WAYPOINT_SET_ACTIVE" id="95">
     <field name="target_system" type="uint8_t">System ID</field>
     <field name="target_component" type="uint8_t">Component ID</field>
     <field name="id" type="uint16_t">ID</field>
   </message>

  <message name="WAYPOINT_REQUEST_LIST" id="96">
     <field name="target_system" type="uint8_t">System ID</field>
     <field name="target_component" type="uint8_t">Component ID</field>
   </message>

   <message name="WAYPOINT_REACHED" id="97">
     <field name="target_system" type="uint8_t">System ID</field>
     <field name="target_component" type="uint8_t">Component ID</field>
     <field name="name" type="array[20]">Name of the Waypoint</field>
     <field name="id" type="uint16_t">ID</field>
     <field name="priority" type="uint16_t">Priority</field>
     <field name="x" type="float">x position</field>
     <field name="y" type="float">y position</field>
     <field name="z" type="float">z position</field>
     <field name="yaw" type="float">yaw orientation in radians, 0 = NORTH</field>
     <field name="autocontinue" type="uint16_t">autocontinue to next wp</field>
   </message>

   <!-- Message sent to the MAV to set a new position as reference for the controller -->
   <message name="POSITION_CONTROL_SETPOINT_SET" id="98">
     <field name="target_system" type="uint8_t">System ID</field>
     <field name="target_component" type="uint8_t">Component ID</field>
     <field name="id" type="uint16_t">ID of waypoint, 0 for plain position</field>
     <field name="x" type="float">x position</field>
     <field name="y" type="float">y position</field>
     <field name="z" type="float">z position</field>
     <field name="yaw" type="float">yaw orientation in radians, 0 = NORTH</field>
   </message>

  <!-- Message sent by the MAV once it sets a new position as reference in the controller -->
   <message name="POSITION_CONTROL_SETPOINT" id="99">
     <field name="id" type="uint16_t">ID of waypoint, 0 for plain position</field>
     <field name="x" type="float">x position</field>
     <field name="y" type="float">y position</field>
     <field name="z" type="float">z position</field>
     <field name="yaw" type="float">yaw orientation in radians, 0 = NORTH</field>
   </message>

   <message name="RAW_IMU" id="101">
     <field name="msec"  type="uint64_t">Timestamp (milliseconds)</field>
     <field name="xacc"  type="int16_t">X acceleration (mg raw)</field>
     <field name="yacc"  type="int16_t">Y acceleration (mg raw)</field>
     <field name="zacc"  type="int16_t">Z acceleration (mg raw)</field>
     <field name="xgyro" type="uint16_t">Angular speed around X axis (adc units)</field>
     <field name="ygyro" type="uint16_t">Angular speed around Y axis (adc units)</field>
     <field name="zgyro" type="uint16_t">Angular speed around Z axis (adc units)</field>
     <field name="xmag"  type="int16_t">X Magnetic field (milli tesla)</field>
     <field name="ymag"  type="int16_t">Y Magnetic field (milli tesla)</field>
     <field name="zmag"  type="int16_t">Z Magnetic field (milli tesla)</field>
   </message>

   <message name="RAW_AUX" id="102">
     <field name="adc1" type="uint16_t">ADC1 (J405 ADC3, LPC2148 AD0.6)</field>
     <field name="adc2" type="uint16_t">ADC2 (J405 ADC5, LPC2148 AD0.2)</field>
     <field name="adc3" type="uint16_t">ADC3 (J405 ADC6, LPC2148 AD0.1)</field>
     <field name="adc4" type="uint16_t">ADC4 (J405 ADC7, LPC2148 AD1.3)</field>
     <field name="vbat" type="uint16_t">Battery voltage</field>
     <field name="temp"  type="int16_t">Temperature (degrees celcius)</field>
     <field name="baro"  type="int16_t">Barometric pressure (hecto Pascal)</field>
   </message>

   <message name="SYS_STATUS" id="103">
     <field name="mode" type="uint8_t">System mode</field>
     <field name="status" type="uint8_t">System status flag</field>
     <field name="vbat" type="uint16_t">Battery voltage</field>
     <field name="motor_block" type="uint8_t">Motor block status flag</field>
     <field name="packet_drop" type="uint16_t">Dropped packets</field>
   </message>

   <message name="AUX_STATUS" id="104">
     <field name="load" type="uint16_t">Maximum usage in percent of the mainloop time, should be always below 100</field>
   </message>

  


  <message name="PATTERN_DETECTED" id= "200">
    <field name="confidence" type="float">Confidence of detection</field>
    <field name="file" type="array[100]">Pattern file name</field>
    <field name="detected" type="uint8_t">Accepted as true detection, 0 no, 1 yes</field>
   </message>

  <message name="STATUSTEXT" id= "254">
    <field name="severity" type="uint8_t">Severity of status, 0 = info message, 255 = critical fault</field>
    <field name="text" type="array[50]">Status text message, without null termination character</field>
   </message>


<message name="DEBUG" id="255">
     <field name="ind"  type="uint8_t">index of debug variable</field>
     <field name="value"  type="float">DEBUG value</field>
   </message>

</messages>
